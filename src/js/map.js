console.log("üó∫Ô∏è map.js cargado - Sistema de rutas OSM");const MAP_CONFIG={businessLocation:{lat:-31.342722,lng:-64.474847,address:"V. Roque S√°enz Pe√±a, Bialet Masse, C√≥rdoba, Argentina"},osrmServer:"https://router.project-osrm.org",nominatimServer:"https://nominatim.openstreetmap.org",costoPorMinuto:500,validationMode:"flexible",defaultDistanceIfNotFound:15,allowedCities:["santa mar√≠a","cosqu√≠n","la falda","capilla del monte","bialet masse","cruz del eje","de√°n funes"],cache:new Map,cacheDuration:18e5};function setupStaticMap(){console.log("üó∫Ô∏è Configurando mapa est√°tico OSM...");const e=document.getElementById("map-frame");if(!e)return void console.error("‚ùå #map-frame no encontrado");const o=MAP_CONFIG.businessLocation.lat,n=MAP_CONFIG.businessLocation.lng,a=`https://www.openstreetmap.org/export/embed.html?bbox=${n-.05},${o-.05},${n+.05},${o+.05}&layer=mapnik&marker=${o},${n}&zoom=13`;e.innerHTML=`\n        <iframe \n            src="${a}"\n            width="100%" \n            height="100%" \n            style="border:none; border-radius: 8px;"\n            allowfullscreen\n            loading="lazy"\n            referrerpolicy="no-referrer-when-downgrade"\n            title="Ubicaci√≥n Comidas AMICI - ${MAP_CONFIG.businessLocation.address}">\n        </iframe>\n    `,console.log("‚úÖ Mapa est√°tico configurado para Bialet Masse"),addCoverageInfo()}function addCoverageInfo(){const e=document.querySelector(".map-header");if(e){const o=document.createElement("div");o.className="coverage-info",o.innerHTML=`\n            <div class="coverage-badge">\n                <i class="fas fa-truck"></i>\n                <span>Env√≠os en C√≥rdoba Norte</span>\n            </div>\n            <p class="coverage-note">Costo de env√≠o: $${MAP_CONFIG.costoPorMinuto} por minuto de viaje</p>\n        `;const n=e.querySelector(".coverage-info");n&&n.remove(),e.appendChild(o)}}async function geocodeAddress(e){console.log("üìç Geocodificando:",e);const o=`geocode:${e}`;if(MAP_CONFIG.cache.has(o))return console.log("‚úì Usando cach√©"),MAP_CONFIG.cache.get(o);try{const n=`${MAP_CONFIG.nominatimServer}/search?q=${encodeURIComponent(e+", C√≥rdoba, Argentina")}&format=json&limit=1&addressdetails=1`;console.log("üîó URL 1:",n);const a=await fetch(n,{headers:{"User-Agent":"ComidasAMICI-Delivery/1.0",Accept:"application/json"}});if(a.ok){const e=await a.json();if(e&&e.length>0){const n=parseGeocodingResult(e[0]);return MAP_CONFIG.cache.set(o,n),console.log("‚úÖ Encontrado con Estrategia 1"),n}}console.log("üîÑ Intentando extraer ciudad...");const t=extractCityFromAddress(e);if(t){console.log("üîç Buscando ciudad:",t);const e=`${MAP_CONFIG.nominatimServer}/search?q=${encodeURIComponent(t+", C√≥rdoba, Argentina")}&format=json&limit=1&addressdetails=1`,n=await fetch(e,{headers:{"User-Agent":"ComidasAMICI-Delivery/1.0",Accept:"application/json"}});if(n.ok){const e=await n.json();if(e&&e.length>0){const n=parseGeocodingResult(e[0]);return n.direccionCorta=t,n.esAproximado=!0,MAP_CONFIG.cache.set(o,n),console.log("‚úÖ Ciudad encontrada (aproximada)"),n}}}console.log("üîÑ Usando ubicaci√≥n por defecto...");const i=extractCityFromAddress(e)||"Santa Mar√≠a",r=getDefaultCoordinatesForCity(i);if(r){const n={lat:r.lat,lng:r.lng,direccion:e,direccionCorta:i,barrio:i,ciudad:i,tipoLugar:"city",esAproximado:!0,esPorDefecto:!0};return MAP_CONFIG.cache.set(o,n),console.log("‚úÖ Usando coordenadas por defecto para:",i),n}return console.warn("‚ùå No se pudo geocodificar la direcci√≥n"),null}catch(e){return console.error("‚ùå Error en geocodificaci√≥n:",e),null}}function parseGeocodingResult(e){return{lat:parseFloat(e.lat),lng:parseFloat(e.lon),direccion:e.display_name,direccionCorta:`${e.address.road||""} ${e.address.house_number||""}`.trim(),barrio:e.address.suburb||e.address.neighbourhood||e.address.village||"",ciudad:e.address.city||e.address.town||e.address.municipality||e.address.county||"C√≥rdoba",tipoLugar:e.type}}function extractCityFromAddress(e){const o=e.split(",").map((e=>e.trim()));for(let e=o.length-1;e>=0;e--){const n=o[e].toLowerCase(),a=MAP_CONFIG.allowedCities;for(const e of a)if(n.includes(e))return n.charAt(0).toUpperCase()+n.slice(1);if(n.length>2&&!n.match(/^\d+$/))return n.charAt(0).toUpperCase()+n.slice(1)}return null}function getDefaultCoordinatesForCity(e){return{"santa mar√≠a":{lat:-31.3,lng:-64.4667},cosqu√≠n:{lat:-31.2417,lng:-64.4706},"la falda":{lat:-31.0833,lng:-64.4833},"capilla del monte":{lat:-30.85,lng:-64.5333},"bialet masse":{lat:-31.3427,lng:-64.4748},"cruz del eje":{lat:-30.7167,lng:-64.8},"de√°n funes":{lat:-30.4333,lng:-64.35},"valle de punilla":{lat:-31.25,lng:-64.5},c√≥rdoba:{lat:-31.4201,lng:-64.1888}}[e.toLowerCase()]||null}async function calculateRoute(e,o){console.log("üõ£Ô∏è Calculando ruta...");const n=`route:${e.lat},${e.lng}-${o.lat},${o.lng}`;if(MAP_CONFIG.cache.has(n))return MAP_CONFIG.cache.get(n);if(o.esAproximado||o.esPorDefecto)return console.log("üìè Usando c√°lculo estimado para ubicaci√≥n aproximada"),calculateEstimatedDistance(e,o);try{const a=`${MAP_CONFIG.osrmServer}/route/v1/driving/${e.lng},${e.lat};${o.lng},${o.lat}?overview=simplified&alternatives=false&steps=true`,t=await fetch(a);if(!t.ok)throw new Error(`OSRM error: ${t.status}`);const i=await t.json();if("Ok"===i.code&&i.routes&&i.routes.length>0){const e=i.routes[0],o={distancia:e.distance,duracion:e.duration,distanciaKm:(e.distance/1e3).toFixed(2),duracionMinutos:Math.ceil(e.duration/60),esExacto:!0,geometria:e.geometry};return MAP_CONFIG.cache.set(n,o),console.log("‚úÖ Ruta calculada:",o.distanciaKm,"km en",o.duracionMinutos,"min"),o}return calculateEstimatedDistance(e,o)}catch(n){return console.error("‚ùå Error calculando ruta:",n),calculateEstimatedDistance(e,o)}}function calculateEstimatedDistance(e,o){const n=e.lat*Math.PI/180,a=o.lat*Math.PI/180,t=(o.lat-e.lat)*Math.PI/180,i=(o.lng-e.lng)*Math.PI/180,r=Math.sin(t/2)*Math.sin(t/2)+Math.cos(n)*Math.cos(a)*Math.sin(i/2)*Math.sin(i/2),c=1.5*(6371e3*(2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r)))),s=c/8.33,l={distancia:Math.round(c),duracion:Math.round(s),distanciaKm:(c/1e3).toFixed(2),duracionMinutos:Math.ceil(s/60),esExacto:!1,esEstimado:!0};return console.log("‚úÖ Distancia estimada:",l.distanciaKm,"km en",l.duracionMinutos,"min"),l}function calculateDeliveryCost(e,o=""){const n=parseInt(e);if("flexible"===MAP_CONFIG.validationMode&&o){const e=o.toLowerCase();if(!MAP_CONFIG.allowedCities.some((o=>e.includes(o))))return{costo:0,zona:"Ciudad no cubierta",tiempoEstimado:"Consultar",dentroCobertura:!1,mensaje:"Esta ciudad no est√° en nuestra zona de cobertura"}}if(isNaN(n)||n<=0)return{costo:500,zona:"Costo m√≠nimo",tiempoEstimado:"30-45 min",dentroCobertura:!0,duracionCalculada:1};if(n>240)return{costo:0,zona:"Distancia muy larga",tiempoEstimado:"Consultar",dentroCobertura:!1,mensaje:"Distancia muy extensa. Por favor consultar disponibilidad."};let a="";a=n<=30?"Zona 1: Hasta 30 min":n<=60?"Zona 2: 30-60 min":n<=90?"Zona 3: 60-90 min":n<=120?"Zona 4: 90-120 min":n<=180?"Zona 5: 120-180 min":"Zona 6: M√°s de 180 min";let t="";return t=n<=30?"30-45 min":n<=60?"45-90 min":n<=90?"90-120 min":n<=120?"120-150 min":n<=180?"150-180 min":"M√°s de 180 min",{costo:n*MAP_CONFIG.costoPorMinuto,zona:a,tiempoEstimado:t,dentroCobertura:!0,duracionCalculada:n}}async function calculateDeliveryFromAddress(e){console.log("üöö Calculando env√≠o para:",e);const o=await geocodeAddress(e);if(!o){const o=extractCityFromAddress(e),n=o?o.toLowerCase():"";if(MAP_CONFIG.allowedCities.some((e=>n.includes(e)))&&"flexible"===MAP_CONFIG.validationMode){console.log("üìç Aceptando ciudad permitida en modo flexible:",o);const e=getDefaultTimeForCity(o);return{...calculateDeliveryCost(e,o),distancia:getDefaultDistanceForCity(o),tiempo:e,direccionCliente:o,barrio:o,ciudad:o,esAproximado:!0,mensajeNota:"C√°lculo aproximado - Direcci√≥n no encontrada exactamente"}}return{error:"No se pudo encontrar la direcci√≥n exacta. Intenta con formato: 'Calle N√∫mero, Ciudad'",costo:0,dentroCobertura:!1,sugerencia:"Ejemplo: 'San Mart√≠n 500, Santa Mar√≠a, C√≥rdoba'"}}const n=await calculateRoute(MAP_CONFIG.businessLocation,o);return{...calculateDeliveryCost(n.duracionMinutos,o.ciudad),distancia:n.distanciaKm,tiempo:n.duracionMinutos,direccionCliente:o.direccionCorta||o.ciudad,barrio:o.barrio,ciudad:o.ciudad,esRutaExacta:n.esExacto,esEstimado:n.esEstimado||!1,esAproximado:o.esAproximado||!1}}function getDefaultTimeForCity(e){return{"santa mar√≠a":45,cosqu√≠n:60,"la falda":90,"capilla del monte":120,"bialet masse":15,"cruz del eje":150,"de√°n funes":180}[e.toLowerCase()]||60}function getDefaultDistanceForCity(e){return{"santa mar√≠a":5,cosqu√≠n:15,"la falda":25,"capilla del monte":40,"bialet masse":2,"cruz del eje":60,"de√°n funes":80}[e.toLowerCase()]||15}function updateDeliveryInfo(e){console.log("üîÑ Actualizando interfaz...");const o=document.getElementById("delivery-cost"),n=document.getElementById("total-cost");if(o&&n)if(e.dentroCobertura){o.textContent=`$${e.costo}`,o.className="delivery-cost-ok";const a=parseFloat(document.getElementById("subtotal").textContent.replace("$",""))||0;n.textContent=`$${a+e.costo}`,showDeliveryDetails(e),(e.esAproximado||e.mensajeNota)&&showNotification(e.mensajeNota||"C√°lculo basado en ubicaci√≥n aproximada","info")}else o.textContent="Consultar",o.className="delivery-cost-error",n.textContent="Consultar",e.mensaje?showNotification(e.mensaje,"warning"):e.error&&showNotification(e.error,"error");updateFormDeliveryInfo(e)}function showNotification(e,o="info"){const n=document.getElementById("notification");n?(n.textContent=e,n.className=`notification ${o}`,n.style.display="block",setTimeout((()=>{n.style.display="none"}),5e3)):console.warn(e)}function showDeliveryDetails(e){let o=document.getElementById("delivery-details");if(!o){o=document.createElement("div"),o.id="delivery-details",o.className="delivery-details fade-in";const e=document.querySelector(".order-summary");e&&e.parentNode.insertBefore(o,e)}const n=e.esRutaExacta?"‚úì":e.esAproximado?"‚âà":"~";let a="zone-out";const t=e.duracionCalculada||e.tiempo;a=t<=30?"zone-1":t<=60?"zone-2":t<=90?"zone-3":t<=120?"zone-4":t<=180?"zone-5":"zone-6";let i="";e.esAproximado&&(i='<div class="approximation-note"><i class="fas fa-info-circle"></i> C√°lculo aproximado</div>'),o.innerHTML=`\n        <div class="delivery-info">\n            <div class="delivery-row">\n                <i class="fas fa-map-pin"></i>\n                <span><strong>${e.direccionCliente}, ${e.ciudad}</strong></span>\n            </div>\n            <div class="delivery-row">\n                <i class="fas fa-route"></i>\n                <span>Distancia: <strong>${e.distancia} km</strong> ${n}</span>\n            </div>\n            <div class="delivery-row">\n                <i class="fas fa-clock"></i>\n                <span>Tiempo estimado: <strong>${t} minutos</strong></span>\n            </div>\n            <div class="delivery-row">\n                <i class="fas fa-truck"></i>\n                <span>Env√≠o: <strong>$${e.costo}</strong></span>\n            </div>\n            <div class="zone-indicator ${a}">\n                <i class="fas ${e.dentroCobertura?"fa-check-circle":"fa-exclamation-circle"}"></i>\n                <span>${e.zona}</span>\n            </div>\n            ${i}\n        </div>\n    `}function updateFormDeliveryInfo(e){const o=document.querySelector(".submit-btn");if(o){const n=document.querySelector(".delivery-time-info");if(n&&n.remove(),e.dentroCobertura){const n=document.createElement("div");n.className="delivery-time-info";let a="";e.esAproximado&&(a='<small><i class="fas fa-info-circle"></i> C√°lculo aproximado</small>'),n.innerHTML=`\n                <p>\n                    <i class="fas fa-shipping-fast"></i> \n                    Tiempo estimado: <strong>${e.tiempo} minutos</strong> | \n                    Costo env√≠o: <strong>$${e.costo}</strong>\n                </p>\n                ${a}\n            `,o.parentNode.insertBefore(n,o)}}}function setupAddressValidation(){console.log("üîç Configurando validaci√≥n de direcciones...");let e;["customer-street","customer-number","customer-neighborhood","customer-city"].forEach((o=>{const n=document.getElementById(o);n&&n.addEventListener("blur",(async function(){clearTimeout(e),e=setTimeout((async()=>{const e=document.getElementById("customer-street")?.value.trim(),o=document.getElementById("customer-number")?.value.trim(),n=document.getElementById("customer-neighborhood")?.value.trim(),a=document.getElementById("customer-city")?.value.trim();if(!(e&&o&&n&&a))return;const t=`${e} ${o}, ${n}, ${a}`;showLoadingIndicator(!0);try{updateDeliveryInfo(await calculateDeliveryFromAddress(t))}catch(e){console.error("Error:",e),showNotification("Error al calcular env√≠o. Intenta nuevamente.","error")}finally{showLoadingIndicator(!1)}}),800)}))})),console.log("‚úÖ Validaci√≥n de direcciones configurada")}function showLoadingIndicator(e){let o=document.getElementById("map-loading-indicator");if(!o&&e){o=document.createElement("div"),o.id="map-loading-indicator",o.className="loading-indicator",o.innerHTML='<i class="fas fa-spinner fa-spin"></i> Calculando env√≠o...';const e=document.getElementById("map-frame");e&&e.parentNode.insertBefore(o,e.nextSibling)}o&&(o.style.display=e?"block":"none")}function generarUrlUbicacion(){console.log("üìç Generando URL de Google Maps...");const e=document.getElementById("customer-street")?.value.trim()||"",o=document.getElementById("customer-number")?.value.trim()||"",n=document.getElementById("customer-neighborhood")?.value.trim()||"",a=document.getElementById("customer-city")?.value.trim()||"";if(!e||!o||!a)return console.warn("‚ö†Ô∏è Faltan datos para generar ubicaci√≥n"),null;let t=`${e}+${o}`;n&&(t+=`,+${n}`),t+=`,+${a},+C√≥rdoba,+Argentina`,t=t.replace(/\s+/g,"+").replace(/√±/g,"n").replace(/√ë/g,"N").replace(/√°/g,"a").replace(/√©/g,"e").replace(/√≠/g,"i").replace(/√≥/g,"o").replace(/√∫/g,"u").replace(/√Å/g,"A").replace(/√â/g,"E").replace(/√ç/g,"I").replace(/√ì/g,"O").replace(/√ö/g,"U");const i=`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(t)}`,r=`${e} ${o}${n?", "+n:""}, ${a}, C√≥rdoba, Argentina`.replace(/, ,/g,",").replace(/^\s*,\s*|\s*,\s*$/g,"");return console.log("‚úÖ URL de Google Maps generada:",i),{googleMaps:i,direccionTexto:r,direccionCorta:`${e} ${o}, ${a}`}}function integrarConFormJS(){if(console.log("üîó Integrando con form.js..."),"function"==typeof window.submitOrder){console.log("‚úÖ Funci√≥n submitOrder encontrada, integrando...");const e=window.submitOrder;window.submitOrder=function(){console.log("üìç submitOrder interceptado - Agregando ubicaci√≥n de Google Maps");const o=generarUrlUbicacion();if(o){console.log("‚úÖ Ubicaci√≥n generada, procesando mensaje...");const e=document.getElementById("whatsapp-message");if(e){let n=e.value||"";if(/UBICACI√ìN EN GOOGLE MAPS:.*google\.com\/maps/i.test(n))console.log("‚ÑπÔ∏è El mensaje ya contiene ubicaci√≥n, no se duplica");else{const a=n.split("\n");let t="",i=!1;for(let e=0;e<a.length;e++)t+=a[e]+"\n",!i&&(a[e].includes("DIRECCI√ìN DE ENTREGA:")||a[e].includes("Direcci√≥n de entrega:")||a[e].includes("üìç *DIRECCI√ìN DE ENTREGA:*"))&&(t+="\nüìç *UBICACI√ìN EN GOOGLE MAPS:*\n",t+=`${o.googleMaps}\n\n`,i=!0,e++,a[e]&&a[e].trim()&&e++,a[e]&&a[e].trim()&&e++);i||(t+=`\n\nüìç *UBICACI√ìN EN GOOGLE MAPS:*\n${o.googleMaps}\n`),e.value=t,console.log("‚úÖ Ubicaci√≥n de Google Maps agregada al mensaje SIN DUPLICADOS")}}}return e()},console.log("‚úÖ Funci√≥n submitOrder integrada exitosamente")}else console.warn("‚ö†Ô∏è Funci√≥n submitOrder no encontrada en form.js"),integrarWhatsappDirectamente()}function integrarWhatsappDirectamente(){console.log("üîó Intentando integraci√≥n directa con bot√≥n WhatsApp...");const e=document.querySelector(".whatsapp-button, .whatsapp-submit-btn, .submit-btn");if(e){console.log("‚úÖ Bot√≥n WhatsApp encontrado");const o=e.onclick;e.addEventListener("click",(function(e){console.log("üìç Bot√≥n WhatsApp clickeado - Agregando ubicaci√≥n");const n=generarUrlUbicacion();if(n){const e=document.getElementById("whatsapp-message");if(e){let o=e.value||"";o.includes("google.com/maps")||o.includes("UBICACI√ìN EN GOOGLE MAPS")||(o+=`\n\nüìç *UBICACI√ìN EN GOOGLE MAPS:*\n${n.googleMaps}`,e.value=o,console.log("‚úÖ Ubicaci√≥n agregada al mensaje"))}}if(o)return o.call(this,e)}))}}function agregarUbicacionAlMensajeWhatsApp(){console.log("üìç Agregando ubicaci√≥n al mensaje de WhatsApp...");const e=document.getElementById("whatsapp-message");if(!e)return console.warn("‚ö†Ô∏è No se encontr√≥ textarea de WhatsApp"),!1;const o=generarUrlUbicacion();if(!o)return console.warn("‚ö†Ô∏è No se pudo generar ubicaci√≥n"),!1;let n=e.value||"";const a=/üìç \*UBICACI√ìN EN GOOGLE MAPS:\*\s*\nhttps:\/\/www\.google\.com\/maps\/[^\n]*/i;if(a.test(n))console.log("‚ÑπÔ∏è Ya existe ubicaci√≥n en el mensaje, reemplazando..."),n=n.replace(a,`üìç *UBICACI√ìN EN GOOGLE MAPS:*\n${o.googleMaps}`);else{console.log("‚ûï Agregando nueva ubicaci√≥n...");const e=n.split("\n");let a="",t=!1;for(let n=0;n<e.length;n++)a+=e[n]+"\n",!t&&e[n].includes("DIRECCI√ìN DE ENTREGA")&&(n++,a+=`\nüìç *UBICACI√ìN EN GOOGLE MAPS:*\n${o.googleMaps}\n\n`,t=!0);if(t)n=a;else{const e=n.indexOf("RESUMEN DE PAGO:");-1!==e?n=n.slice(0,e)+`\nüìç *UBICACI√ìN EN GOOGLE MAPS:*\n${o.googleMaps}\n\n`+n.slice(e):n+=`\n\nüìç *UBICACI√ìN EN GOOGLE MAPS:*\n${o.googleMaps}\n`}}return e.value=n,console.log("‚úÖ Ubicaci√≥n de Google Maps agregada/actualizada SIN DUPLICADOS"),!0}function initMapSystem(){console.log("üîÑ Inicializando sistema de mapas..."),setupStaticMap(),setTimeout((()=>{setupAddressValidation()}),1e3),integrateWithExistingSystem(),setTimeout((()=>{integrarConFormJS()}),1500),console.log("‚úÖ Sistema de mapas inicializado - Costo: $",MAP_CONFIG.costoPorMinuto,"por minuto")}function integrateWithExistingSystem(){if(console.log("üîó Integrando con sistema existente..."),"function"==typeof window.calculateSubtotal){const e=window.calculateSubtotal;window.calculateSubtotal=function(){const o=e(),n=document.getElementById("delivery-cost");let a=500;return n&&!n.textContent.includes("$")&&(a=parseInt(n.textContent.replace("$",""))||500),o+a},console.log("‚úÖ calculateSubtotal integrado")}addDeliveryStyles()}function addDeliveryStyles(){console.log("‚úÖ Usando map.css para estilos");Array.from(document.styleSheets).find((e=>e.href&&e.href.includes("map.css")))?console.log("‚úÖ map.css detectado"):(console.warn("‚ö†Ô∏è map.css no detectado"),createFallbackStyles())}function createFallbackStyles(){const e="map-fallback-styles";if(!document.getElementById(e)){const o=document.createElement("style");o.id=e,o.textContent="\n            .delivery-details { background: #f8f9fa; border-radius: 8px; padding: 12px; margin: 15px 0; border-left: 4px solid #28a745; }\n            .delivery-info { display: flex; flex-direction: column; gap: 8px; }\n            .delivery-row { display: flex; align-items: center; gap: 10px; font-size: 14px; }\n            .delivery-row i { color: #6c757d; width: 20px; }\n            .zone-indicator { padding: 6px 12px; border-radius: 20px; font-size: 13px; display: inline-flex; align-items: center; gap: 8px; margin-top: 8px; }\n            .zone-1 { background: #d4edda; color: #155724; }\n            .zone-2 { background: #fff3cd; color: #856404; }\n            .zone-3 { background: #f8d7da; color: #721c24; }\n            .zone-4 { background: #cce5ff; color: #004085; }\n            .zone-5 { background: #e6d2ff; color: #4b0082; }\n            .zone-6 { background: #ffd6cc; color: #cc3300; }\n            .zone-out { background: #e2e3e5; color: #383d41; }\n            .delivery-cost-ok { color: #28a745; font-weight: bold; }\n            .delivery-cost-error { color: #dc3545; font-weight: bold; }\n            .loading-indicator { background: rgba(255,255,255,0.9); padding: 10px; border-radius: 8px; text-align: center; margin: 10px 0; }\n            .fade-in { animation: fadeIn 0.3s ease-in; }\n            .approximation-note { background: #e7f3ff; padding: 5px 10px; border-radius: 4px; font-size: 12px; color: #0066cc; margin-top: 8px; display: flex; align-items: center; gap: 5px; }\n            .notification.info { background: #d1ecf1; border-color: #bee5eb; color: #0c5460; }\n            .notification.warning { background: #fff3cd; border-color: #ffeaa7; color: #856404; }\n            .notification.error { background: #f8d7da; border-color: #f5c6cb; color: #721c24; }\n            .delivery-time-info .cost-formula { font-size: 12px; color: #6c757d; margin-top: 5px; }\n            .whatsapp-submit-btn:hover { background: #128C7E; transform: scale(1.02); transition: all 0.2s; }\n            @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n        ",document.head.appendChild(o)}}window.setupStaticMap=setupStaticMap,window.calculateDeliveryFromAddress=calculateDeliveryFromAddress,window.updateDeliveryInfo=updateDeliveryInfo,window.initMapSystem=initMapSystem,window.geocodeAddress=geocodeAddress,window.generarUrlUbicacion=generarUrlUbicacion,window.agregarUbicacionAlMensajeWhatsApp=agregarUbicacionAlMensajeWhatsApp,"loading"===document.readyState?document.addEventListener("DOMContentLoaded",initMapSystem):setTimeout(initMapSystem,500),console.log("‚úÖ Sistema de mapas listo - Costo: $",MAP_CONFIG.costoPorMinuto,"por minuto de viaje");