function extractCityFromAddress(t){const e=t.split(",").map((t=>t.trim()));for(let t=e.length-1;t>=0;t--){const o=e[t].toLowerCase(),r=MAP_CONFIG.allowedCities;for(const t of r)if(o.includes(t))return o.charAt(0).toUpperCase()+o.slice(1)}return null}function setupAddressValidation(){let t;["customer-street","customer-number","customer-neighborhood","customer-city"].forEach((e=>{const o=document.getElementById(e);o&&["input","blur","change"].forEach((e=>{o.addEventListener(e,(async function(){const e=document.getElementById("customer-street")?.value.trim(),r=document.getElementById("customer-number")?.value.trim(),n=document.getElementById("customer-city")?.value.trim(),s=document.getElementById("customer-neighborhood")?.value.trim();e&&r&&n?(clearTimeout(t),t=setTimeout((async()=>{const t=`${e} ${r}, ${s}, ${n}`;if(o.dataset.lastCalc!==t){o.dataset.lastCalc=t,showLoadingIndicator(!0);try{const e=await calculateDeliveryFromAddress(t);updateDeliveryInfo(e)}catch(t){console.error(t)}finally{showLoadingIndicator(!1)}}}),800)):"function"==typeof window.updateOrderSummary&&window.updateOrderSummary()}))}))}))}console.log("üìç address-validator.js cargado"),window.extractCityFromAddress=extractCityFromAddress,window.setupAddressValidation=setupAddressValidation;